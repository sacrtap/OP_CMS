---
stepsCompleted: ['step-01-init', 'step-02-discovery', 'step-02b-vision', 'step-02c-executive-summary', 'step-03-success', 'step-04-journeys', 'step-05-domain', 'step-06-innovation', 'step-07-project-type', 'step-08-scoping', 'step-09-functional', 'step-10-nonfunctional', 'step-11-polish']
inputDocuments: [
  "/Users/sacrtap/Documents/trae_projects/OP_CMS/_bmad-output/planning-artifacts/product-brief-OP_CMS-2026-02-24.md",
  "/Users/sacrtap/Documents/trae_projects/OP_CMS/_bmad-output/planning-artifacts/architecture-design-v1.md",
  "/Users/sacrtap/Documents/trae_projects/OP_CMS/_bmad-output/planning-artifacts/database-design-v1.md",
  "/Users/sacrtap/Documents/trae_projects/OP_CMS/_bmad-output/planning-artifacts/api-design-v1.md",
  "/Users/sacrtap/Documents/trae_projects/OP_CMS/_bmad-output/planning-artifacts/frontend-design-v1.md"
]
workflowType: 'prd'
date: '2026-02-24'
classification:
  projectType: '内部 Web 应用'
  domain: '企业运营软件'
  complexity: '中等'
  projectContext: 'brownfield'
---

# Product Requirements Document - OP_CMS

**Author:** Sacrtap  
**Date:** 2026-02-24

---

## Executive Summary

OP_CMS 是一款企业自建的客户信息管理与运营中台系统，专为房产行业设计，解决当前 Excel 手工管理导致的结算效率低下、准确性差、决策滞后等核心痛点。系统以结算管理为核心，通过三种灵活定价模式（单层/多层/阶梯）和设备系列分类（X/N/L），覆盖 95% 的房产行业结算场景，确保企业"准时收到每一分钱"。

目标用户为内部运营、销售和管理团队（约 20 人），核心价值是将月度结算时间从 3 天缩短到 4 小时，消除手工计算错误，提升回款率 10% 以上，让运营团队从繁琐对账工作中解放出来，专注于高价值的数据分析和客户服务。

**数据导入策略：** 批量导入仅包含客户基础信息（公司名称、联系人、ERP 系统等），结算相关信息（定价模式、价格配置）由运营人员在系统中逐户录入，确保准确性和可控性。

**边缘场景处理：** 系统支持 3 种标准结算模式，覆盖 95% 场景。剩余特殊情况通过人工计算后手动录入结果。

### What Makes This Special

**差异化定位：** 不是通用 CRM，而是专为房产行业设计的收入保障平台。

**核心差异化：**
1. **结算为核心** - 传统 CRM 聚焦销售流程，OP_CMS 聚焦收入准确性和及时性
2. **行业定制** - 三种结算模式覆盖房产行业 95% 场景，而非通用模板
3. **内部视角** - 专为企业内部运营设计，非 SaaS 产品，简化架构聚焦单租户性能
4. **渐进式智能化** - 从基础系统化→自动化→智能化的清晰演进路径
5. **人机分离设计** - 批量数据导入与结算配置分离，平衡效率与准确性

**核心洞察：** 房产企业的收入损失主要来自内部管理混乱导致的结算延迟和错误，而非客户赖账。通过系统化和自动化，可在不增加人力的情况下提升 10-30% 回款率。

**不行动的成本：** 当前手工管理导致每月损失约 120 小时人力成本，逾期率 18%，预计年损失 12 万元。

## Project Classification

| 分类维度   | 分类结果      | 说明                                              |
| ---------- | ------------- | ------------------------------------------------- |
| **项目类型**   | 内部 Web 应用 | Vue 3 前端 + Python 3.9+ Sanic 后端               |
| **所属领域**   | 企业运营软件  | 房产行业客户管理与结算                            |
| **复杂度**     | 中等          | 结算规则复杂，但业务逻辑清晰                      |
| **项目上下文** | Brownfield    | 已有完整产品简报和技术设计文档                    |
| **架构模式**   | 单租户        | 企业内部使用，无需多租户支持                      |
| **数据特征**   | 规则密集型    | 1320 条客户数据，3 种复杂结算模式，精确计算要求高 |


---

## Success Criteria

### User Success

**运营人员：**
- 月度结算时间从 3 天缩短到 4 小时（效率提升 89%）
- 结算准确性提升至 ≥95%（消除手工计算错误）
- 从繁琐的对账工作中解放，专注于数据分析和客户服务

**销售人员：**
- 24小时内完成客户信息更新（响应速度提升 300%）
- 回款率提升 10% 以上（准时收到每一分钱）
- 销售数据实时可见，支持精准客户分级和跟进策略

**管理人员：**
- 实时监控客户账单执行情况（告别报表滞后）
- 结算报表准备时间从 2 天缩短到 2 小时（效率提升 96%）
- 风险识别提前至 30 天（从被动处理到主动预防）

### Business Success

**效率指标：**
- 每月节省 2.5 人天的运营时间（相当于 1 个全职员工的工作量）
- 结算流程自动化率达 95%（覆盖标准场景）

**质量指标：**
- 结算准确性提升至 98%（系统计算 + 人工校验）
- 客户信息一致性达 100%（消除 Excel 版本差异）

**财务指标：**
- 逾期率降低 30%（从手工管理的高风险到系统监控）
- 回款周期缩短 15%（从平均 35 天到 29 天）
- 预计年化收入增加 12%（通过优化定价和及时结算）

### Technical Success

**性能指标：**
- 系统可用性 ≥99.5%（每周计划维护 ≤4 小时）
- 核心操作响应时间 <2 秒（客户查询、账单生成）
- 1320条客户数据批量导入时间 <10 分钟（优化数据处理效率）

**扩展性指标：**
- 支持 20 并发用户（覆盖全部内部用户）
- 系统可处理客户数量增长至 5000+（为未来业务扩张预留空间）

**安全指标：**
- 数据备份完整性 100%（每日增量备份 + 每周全量备份）
- 用户权限分级管理（运营/销售/管理三级权限）
- 敏感数据加密传输（HTTPS + AES-256 加密）

### Measurable Outcomes

| 指标类型       | 具体指标                                  | 基线值    | 目标值    | 时间范围 | 测量方法                          |
|----------------|-------------------------------------------|-----------|-----------|----------|-----------------------------------|
| **用户成功**   | 月度结算时间                              | 3天       | 4小时     | 6个月    | 系统日志分析                      |
|                | 结算准确性                                | 60%       | ≥95%      | 3个月    | 人工校验与系统计算对比            |
| **商业成功**   | 回款率                                    | 75%       | 85%+      | 6个月    | 财务系统数据对比                  |
|                | 运营效率提升                              | -         | 89%       | 3个月    | 工时统计                          |
| **技术成功**   | 系统响应时间                              | -         | <2秒      | 1个月    | 性能测试报告                      |
|                | 用户并发支持                              | -         | 20人      | 1个月    | 压力测试报告                      |
| **用户体验**   | 用户满意度评分                            | -         | ≥4.5/5.0  | 3个月    | 内部用户调查问卷                  |
| **业务增长**   | 客户数据完整性                            | 80%       | 100%      | 2个月    | 数据质量监控                      |
|                | 逾期率                                    | 18%       | ≤12%      | 6个月    | 财务报表分析                      |

## Product Scope

### MVP (Minimum Viable Product) - 8-10周

**核心功能模块：**
1. **客户基础管理**（第2周）：客户信息录入、查询、编辑、删除
2. **Excel数据导入**（第4周）：客户基础信息批量导入
3. **定价模式配置**（第6周）：单层/多层/阶梯定价模式设置
4. **结算管理**（第8周）：账单生成、结算、导出功能
5. **报表功能**（第10周）：基础结算报表和数据分析

**边界约束：**
- 覆盖 95% 的标准结算场景
- 支持 X/N/L 设备系列分类
- 不包含自定义公式编辑功能（留待增长阶段）
- 边缘场景（5%）处理说明：
  - 设备类型变更或升级场景
  - 跨设备系列混合使用场景
  - 特殊客户的个性化结算规则
  - 异常数据（如缺失字段、格式错误）的处理
  - 剩余特殊情况通过人工计算后手动录入

### Growth Features (Post-MVP)

**阶段 2（自动化）：**
- 自动数据同步（ERP系统集成）
- 智能对账建议（基于历史数据）
- 预警机制（逾期客户提醒）

**阶段 3（数据分析）：**
- 高级报表（多维度数据分析）
- 客户分层管理（价值等级划分）
- 预测分析（回款趋势预测）

**阶段 4（UX优化）：**
- 自定义界面主题
- 移动APP支持
- 高级搜索和筛选功能

### Vision (Future)

**长期愿景（1-3年）：**
1. **智能化收入保障平台**：结合AI预测客户还款风险，自动优化结算策略
2. **开放集成平台**：与更多外部系统（CRM、财务软件）实现深度集成
3. **数据驱动决策引擎**：基于大数据分析提供运营优化建议
4. **行业解决方案扩展**：将成功模式复制到其他行业（如教育、医疗）

---

## User Journeys

### Journey 1: 运营人员 - 李静的结算自动化之旅

**Opening Scene (现状):**
李静是一位 28 岁的运营专员，拥有 3 年行业经验。每月月底是她最煎熬的时刻 - 面对 1320 条客户数据，她需要在 Excel 中手动输入价格信息，根据 3 种不同的结算模式计算账单，核对每一条数据的准确性。这需要她连续加班 3 天，每晚工作到 10 点以后。

**Rising Action (问题升级):**
在结算过程中，她经常会遇到数据输入错误、公式计算失误等问题。有一次，她在输入价格时少打了一个零，导致客户收到了错误的账单，引起了严重的投诉。这次事件让她压力巨大，担心会因此影响自己的工作。

**Climax (产品介入):**
系统上线后，李静的工作发生了翻天覆地的变化。她只需要在系统中点击"生成账单"按钮，系统会自动根据预配置的价格模式计算所有客户的账单。系统还会自动检测和标记异常数据，提醒她进行核对。整个过程只需要 4 小时，而不是之前的 3 天。

在数据导入时，系统会对数据质量进行验证，检查必填字段是否完整、格式是否正确，并标记重复数据。对于价格配置，系统提供版本控制功能，记录变更历史，便于追踪和回滚操作。

**Resolution (成果):**
现在，李静不再需要加班到深夜。她可以准时下班，陪伴家人。账单的准确性提高到了 98%，她再也没有收到过投诉。她从繁琐的数据录入工作中解放出来，开始专注于数据分析和客户服务，提升了自己的职业价值。

**揭示的需求:**
- 自动化账单生成功能
- 价格模式预配置功能
- 异常数据检测和提醒功能
- 批量操作和数据导入/导出功能
- 数据质量验证功能
- 价格配置版本控制功能

### Journey 2: 销售负责人 - 张伟的数据驱动销售之旅

**Opening Scene (现状):**
张伟是一位 35 岁的销售主管，负责维护 80 家客户关系。每月初，他需要向运营部门请求自己负责客户的账单信息，以便跟进回款。这个过程通常需要 1-2 天时间，导致他无法及时与客户沟通。

**Rising Action (问题升级):**
有一次，他的一个重要客户逾期未付款，但他直到运营部门通知才知道。当他联系客户时，发现客户已经收到了错误的账单，但由于信息滞后，问题已经变得严重。这次事件导致客户满意度下降，差点失去了这个重要客户。

**Climax (产品介入):**
系统上线后，张伟可以在自己的账户中实时查看负责客户的账单信息、用量趋势和付款状态。系统会自动发送逾期提醒，让他能够及时跟进。他还可以通过系统导出客户的数据报表，用于销售分析和决策支持。

系统还支持移动端访问，让张伟在外出时也能查看客户数据。

**Resolution (成果):**
现在，张伟的工作效率显著提升。他可以每天花 30 分钟查看客户数据，及时发现潜在问题。逾期率降低了 30%，回款率提升了 10%。他不再需要麻烦运营部门查询数据，而是可以独立完成客户管理工作。

**揭示的需求:**
- 数据隔离和角色权限管理
- 实时数据查看和逾期提醒功能
- 客户用量趋势分析功能
- 个人客户报表导出功能
- 移动端访问支持


### Journey 3: 管理者 - 王总的实时决策之旅

**Opening Scene (现状):**
王总是一位 42 岁的运营总监，负责管理整个团队和监控公司的现金流。他需要依靠每周一次的财务报表来了解公司的经营状况，但这些报表通常滞后 3-4 天。

**Rising Action (问题升级):**
有一次，公司的一个重要客户出现了用量大幅下降的情况，但王总直到财务报表出来才知道。当他采取措施时，客户已经开始转向竞争对手，导致公司收入损失了 20%。

**Climax (产品介入):**
系统上线后，王总可以通过管理驾驶舱实时查看公司的关键指标，包括总收入、回款率、客户流失率等。系统还提供了客户分层看板，帮助他识别高价值客户和风险客户。如果某个客户的用量出现异常，系统会自动发送预警信息。

系统支持关键指标的阈值配置，王总可以根据公司目标设置预警规则。数据导出支持多种格式，包括 PDF、Excel 和图片，方便他在会议和汇报中使用。

**Resolution (成果):**
现在，王总可以每天花 5 分钟查看实时数据，及时发现和解决问题。他的决策速度提升了 3 倍，能够在客户问题升级之前采取措施。公司的客户流失率降低了 25%，现金流状况得到了显著改善。

**揭示的需求:**
- 管理驾驶舱和实时数据看板
- 客户分层和风险预警功能
- 关键指标分析和报表导出
- 经营数据可视化功能
- 关键指标阈值配置功能
- 多样化数据导出格式（PDF、Excel、图片）
- 报表订阅功能

### Journey Requirements Summary

根据上述用户旅程，我们可以识别出以下核心功能需求：

#### 1. 核心业务功能
- 客户信息管理（维护、查询、导入导出）
- 自动化账单生成和管理
- 价格模式配置（单层、多层、阶梯定价）
- 收款核销功能
- 数据导入/导出功能
- 数据质量验证功能（字段格式检查、重复数据检测）
- 价格配置版本控制功能（变更历史记录）

#### 2. 用户权限管理
- 基于角色的数据隔离（运营/销售/管理三级权限）
- 精细的操作权限控制
- 客户数据权限范围管理（按区域、客户类型等维度）
- 操作审计日志功能（记录敏感操作轨迹）

#### 3. 数据分析和报表
- 实时数据看板和可视化
- 客户用量趋势分析
- 逾期提醒和风险预警（自定义预警阈值）
- 多维度报表导出功能（支持 PDF、Excel、CSV）
- 报表订阅功能（定期发送报表到指定邮箱）
- 关键指标阈值配置功能

#### 4. 用户体验优化
- 简洁的操作界面
- 批量操作和自动化流程
- 异常数据检测和提醒
- 移动端兼容（支持移动端访问）
- 价格配置错误的回滚机制

#### 5. 技术架构优化
- Redis缓存机制（对客户基础信息和价格配置进行缓存）
- 异步任务处理（账单生成、报表导出等操作使用消息队列）
- 数据库索引优化（为查询频繁的字段创建索引）
- 操作审计日志（记录所有敏感操作的时间、执行人、操作内容）
- 数据加密（对敏感信息如价格配置进行数据库级加密）

这些需求将指导我们在后续步骤中定义具体的功能规格和技术实现方案。

---

## Functional Requirements

### 1. 客户管理
- [运营人员] 可以维护客户基础信息（公司名称、联系人、ERP系统等）
- [运营人员] 可以查询客户信息（支持按客户名称、类型等条件搜索）
- [运营人员] 可以编辑客户信息（修改联系人、联系方式等）
- [运营人员] 可以删除不再合作的客户信息
- [销售负责人] 可以查看负责客户的详细信息
- [销售负责人] 可以查看客户用量趋势和历史数据
- [管理人员] 可以查看所有客户的汇总信息和分层数据

### 2. 定价配置
- [运营人员] 可以配置单层定价模式（固定价格）
- [运营人员] 可以配置多层定价模式（分段价格）
- [运营人员] 可以配置阶梯定价模式（累进价格）
- [运营人员] 可以为不同设备系列（X/N/L）配置价格
- [运营人员] 可以查看价格配置的变更历史记录
- [运营人员] 可以回滚错误的价格配置变更
- [运营人员] 可以为每个客户设置专属的定价模式和价格

### 3. 结算管理
- [运营人员] 可以自动生成客户账单（根据预配置的价格模式）
- [运营人员] 可以手动录入特殊场景的结算结果
- [运营人员] 可以结算和校验账单的准确性
- [运营人员] 可以发送账单给客户
- [运营人员] 可以记录客户的付款信息（收款核销）
- [销售负责人] 可以查看负责客户的账单信息和付款状态
- [销售负责人] 可以接收客户逾期付款的自动提醒
- [管理人员] 可以查看所有客户的账单执行情况

### 4. 数据分析与报表
- [运营人员] 可以查看结算过程中的异常数据标记
- [运营人员] 可以生成基础结算报表（月度、季度）
- [销售负责人] 可以导出负责客户的数据报表
- [销售负责人] 可以查看客户用量趋势分析图表
- [管理人员] 可以通过管理驾驶舱查看实时数据看板
- [管理人员] 可以查看客户分层和风险预警信息
- [管理人员] 可以查看关键指标分析（总收入、回款率、客户流失率等）
- [所有用户] 可以配置关键指标的阈值预警规则
- [所有用户] 可以订阅报表并定期接收

### 5. 用户权限管理
- [系统管理员] 可以创建和管理用户账户
- [系统管理员] 可以为用户分配角色（运营/销售/管理）
- [系统管理员] 可以配置用户的数据权限范围（按区域、客户类型等）
- [系统管理员] 可以设置精细的操作权限控制
- [所有用户] 可以根据角色访问对应的数据和功能
- [系统管理员] 可以查看用户操作审计日志

### 6. 数据导入导出
- [运营人员] 可以批量导入客户基础信息（Excel格式）
- [运营人员] 可以导出客户信息和账单数据
- [所有用户] 可以导出报表为多种格式（PDF、Excel、CSV、图片）
- [运营人员] 可以导入结算相关的辅助数据
- [系统] 可以对导入的数据进行质量验证（字段完整性、格式检查）
- [系统] 可以检测和标记重复数据

### 7. 系统管理
- [系统管理员] 可以配置系统参数（结算周期、预警阈值等）
- [系统管理员] 可以查看系统运行状态和日志
- [系统管理员] 可以管理数据备份和恢复
- [所有用户] 可以使用移动端访问系统
- [所有用户] 可以接收系统通知和提醒
- [系统] 可以自动执行每日增量备份和每周全量备份
- [系统] 可以对敏感数据进行加密传输和存储

---

## Non-Functional Requirements

### 性能 (Performance)
- 核心操作响应时间：客户查询、账单生成等核心操作响应时间 < 2秒
- 数据导入效率：1320条客户基础信息批量导入时间 < 10分钟
- 账单生成效率：系统生成1320条客户账单时间 < 30分钟
- 并发用户支持：支持至少20个并发用户同时使用系统
- 报表生成速度：复杂报表（含图表）生成时间 < 15秒

### 安全性 (Security)
- 数据加密：敏感数据（价格配置、客户信息）存储时采用 AES-256 加密，传输时使用 HTTPS 加密
- 权限管理：实现三级权限控制（运营/销售/管理），确保数据隔离和操作权限精细管控
- 操作审计：所有敏感操作（如价格配置变更、客户信息修改）需记录详细审计日志，包括操作人、时间、内容
- 数据备份：每日增量备份 + 每周全量备份，数据备份完整性达100%
- 登录安全：支持密码强度校验、登录失败次数限制、会话超时控制（默认30分钟）

### 可靠性 (Reliability)
- 系统可用性：≥99.5%（每周计划维护时间 ≤4小时）
- 数据一致性：客户信息、价格配置等核心数据一致性达100%
- 故障恢复：系统故障后恢复时间 ≤1小时
- 数据准确性：结算计算准确性 ≥99.5%（系统计算结果与人工校验结果差异率 <0.5%）
- 错误处理：系统对异常数据有完善的检测和处理机制，关键操作有失败重试功能

### 可扩展性 (Scalability)
- 用户规模扩展：支持用户数量从当前20人增长到500人
- 数据规模扩展：支持客户数量从当前1320条增长到5000条以上
- 功能扩展：系统架构支持未来添加新功能（如自定义公式编辑、智能对账等）
- 硬件扩展：支持服务器硬件升级和负载均衡配置

### 可访问性 (Accessibility)
- 界面响应式：系统界面支持不同屏幕尺寸（PC端、平板、手机）
- 移动端支持：支持移动端访问（iOS/Android），移动端核心功能可用率 ≥90%
- 操作简洁性：关键操作流程≤3步完成，用户学习成本 ≤2小时
- 辅助功能：支持键盘导航、屏幕阅读器等辅助技术
- 语言支持：系统界面支持中文简体，未来可扩展多语言

### 技术架构 (Technical Architecture)
- 前端架构：Vue 3 + TypeScript + Pinia 状态管理 + Vue Router 路由
- 后端架构：Python 3.9+ Sanic 框架 + MySQL 8.0+ 数据库
- 缓存机制：Redis 缓存（客户基础信息、价格配置、常用报表）
- 异步任务：Celery 消息队列（账单生成、报表导出、数据备份）
- 部署架构：Docker 容器化部署 + Kubernetes 集群管理
- 数据存储：客户信息、价格配置、结算记录等核心数据使用 MySQL 8.0+ 存储
- 文件存储：导入/导出的 Excel/PDF 文件使用云存储（如 AWS S3 或阿里云 OSS）

### 集成性 (Integration)
- ERP系统集成：支持与企业现有ERP系统的数据同步（客户信息、订单数据）
- 数据格式支持：支持导入/导出Excel、CSV、PDF等格式文件
- API接口：提供标准RESTful API接口，支持与其他系统的数据交换
- 第三方服务集成：支持与邮件服务（发送报表通知）、短信服务（发送逾期提醒）集成

### 用户体验 (User Experience)
- 界面设计：采用简洁现代的UI设计，符合企业内部系统使用习惯
- 操作反馈：所有操作有明确的成功/失败反馈，加载状态有进度提示
- 帮助文档：提供详细的用户手册和在线帮助，常见问题覆盖率 ≥90%
- 错误提示：错误信息清晰明确，提供解决建议
- 自定义配置：支持用户自定义界面主题、报表格式等个性化设置
