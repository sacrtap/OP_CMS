```markdown
## Project Context Analysis

### Requirements Overview

**Functional Requirements:**
OP_CMS 是专为房产行业设计的客户信息管理与运营中台系统，核心聚焦结算管理，通过三种灵活定价模式（单层/多层/阶梯）和设备系列分类（X/N/L）覆盖 95% 的房产行业结算场景。功能需求可分为 7 大核心模块：

1. **客户管理**：客户基础信息维护（录入、查询、编辑、删除），支持按角色的数据权限隔离
2. **定价配置**：三种定价模式配置、设备系列价格设置、价格配置版本控制
3. **结算管理**：自动账单生成、特殊场景手工录入、账单校验、收款核销、逾期提醒
4. **数据分析与报表**：实时数据看板、客户用量趋势分析、风险预警、多维度报表导出
5. **用户权限管理**：三级权限控制（运营/销售/管理）、数据权限范围配置、操作审计日志
6. **数据导入导出**：Excel 批量导入、多种格式导出（PDF/Excel/CSV）、数据质量验证
7. **系统管理**：系统参数配置、运行状态监控、数据备份恢复、移动端支持

这些功能需求体现了系统的核心价值定位：将月度结算时间从 3 天缩短到 4 小时，消除手工计算错误，提升回款率 10% 以上，让运营团队从繁琐对账工作中解放出来。

**Non-Functional Requirements:**
非功能需求从多个维度驱动系统架构决策：

1. **性能指标**：核心操作响应时间 <2 秒，1320条客户数据批量导入 <10 分钟，账单生成 <30 分钟，支持 20+ 并发用户
2. **安全性要求**：AES-256 加密存储，HTTPS 传输，三级权限控制，操作审计日志，每日备份
3. **可靠性保障**：系统可用性 ≥99.5%，数据一致性 100%，故障恢复时间 ≤1小时
4. **可扩展性**：支持用户规模扩展到 500 人，客户数量增长到 5000+，支持硬件升级和功能扩展
5. **可访问性**：响应式界面，移动端（iOS/Android）支持，操作简洁性（≤3步关键操作）
6. **技术架构**：Vue 3 前端 + Python 3.9+ Sanic 后端 + MySQL 8.0+ 数据库，Redis 缓存，Celery 异步任务
7. **集成性**：支持 ERP 系统集成、RESTful API、邮件/短信服务集成
8. **用户体验**：现代化 UI，明确操作反馈，详细帮助文档，自定义配置功能

**Scale & Complexity:**
- Primary domain: 企业运营软件（房产行业客户管理与结算）
- Complexity level: 中等（结算规则复杂，但业务逻辑清晰）
- Estimated architectural components: 12+（前端应用、后端服务、数据库、缓存、消息队列、文件存储、监控等）

项目规模适中但具有复杂度：
- 处理 1320 条客户数据，3 种复杂结算模式
- 需要支持 20 名内部用户（运营/销售/管理三级角色）
- 规则密集型业务，对计算精度要求高
- 单租户架构，无需多租户支持，但需数据隔离

### Technical Constraints & Dependencies

1. **技术栈约束**：
   - 前端：Vue 3 + TypeScript + Pinia + Vue Router
   - 后端：Python 3.9+ Sanic 框架
   - 数据库：MySQL 8.0+（从 PostgreSQL 16 迁移而来）
   - 缓存：Redis
   - 异步任务：Celery
    - 部署：Docker + Docker Compose

2. **依赖关系**：
   - 需要与企业现有 ERP 系统集成，同步客户信息和订单数据
   - 依赖云存储服务（如 AWS S3 或阿里云 OSS）存储文件
   - 依赖邮件服务发送报表通知
   - 依赖短信服务发送逾期提醒
   - 内部用户通过 VPN 访问系统

3. **数据特征约束**：
   - 1320 条客户数据，规则密集型业务
   - 结算数据精确计算要求高，需避免浮点运算误差
   - 价格配置变更需记录历史版本，支持回滚
   - 敏感数据（价格配置、客户信息）需加密存储

### Cross-Cutting Concerns Identified

1. **数据质量**：需要在导入阶段进行严格的数据验证（字段完整性、格式检查、重复数据检测），确保数据准确性
2. **安全性**：贯穿整个系统的安全控制，包括身份验证、权限管理、数据加密、操作审计
3. **性能优化**：对查询频繁的字段创建索引，使用 Redis 缓存客户基础信息和价格配置，使用 Celery 异步处理账单生成和报表导出
4. **可靠性**：系统需具备完善的错误处理机制、失败重试功能、数据备份和恢复策略
5. **用户体验**：简洁的操作界面、明确的反馈机制、移动端支持、帮助文档等，降低用户学习成本
6. **可扩展性**：架构设计需支持未来功能扩展（如自定义公式编辑、智能对账）和数据规模增长
7. **监控与日志**：需要实现系统运行状态监控、性能监控、操作审计日志，便于问题定位和系统优化
```