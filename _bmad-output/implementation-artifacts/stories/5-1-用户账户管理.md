# Story 5.1: 用户账户管理

**Status:** ready-for-dev  
**Epic:** Epic 5 - 用户权限管理  
**Story Points:** 5  
**Priority:** High  

---

## User Story

As a 系统管理员,  
I want 可以管理系统用户账户（创建、编辑、禁用）,  
So that 确保系统访问安全。

---

## Acceptance Criteria

### AC 1: 进入用户管理页面
- **Given** 系统管理员登录系统并进入用户管理  
- **When** 页面加载完成  
- **Then** 显示所有用户账户列表  
- **And** 显示用户状态（活跃/禁用）和角色

### AC 2: 创建用户账户
- **Given** 系统管理员需要添加新用户  
- **When** 点击"创建用户"并填写信息  
- **Then** 系统创建用户账户并设置初始密码  
- **And** 发送账户创建通知

### AC 3: 编辑用户信息
- **Given** 系统管理员需要修改用户信息  
- **When** 选择用户并编辑  
- **Then** 系统保存修改后的用户信息  
- **And** 支持重置用户密码

### AC 4: 禁用/启用用户
- **Given** 系统管理员需要管理用户访问权限  
- **When** 禁用或启用用户账户  
- **Then** 系统更新用户状态  
- **And** 记录操作日志

---

## Tasks / Subtasks

- [ ] Task 1: 实现用户管理 API (AC: 2, 3, 4)
  - [ ] Subtask 1.1: GET /api/v1/users - 获取用户列表
  - [ ] Subtask 1.2: POST /api/v1/users - 创建用户
  - [ ] Subtask 1.3: PUT /api/v1/users/:id - 更新用户
  - [ ] Subtask 1.4: DELETE /api/v1/users/:id - 删除用户
  - [ ] Subtask 1.5: POST /api/v1/users/:id/reset-password - 重置密码

- [ ] Task 2: 实现前端用户管理界面 (AC: 1, 2, 3, 4)
  - [ ] Subtask 2.1: UserManagement.vue - 用户管理主界面
  - [ ] Subtask 2.2: UserForm.vue - 用户表单组件
  - [ ] Subtask 2.3: 路由配置 (/admin/users)

- [ ] Task 3: 编写单元测试 (AC: 2, 4)
  - [ ] Subtask 3.1: 测试用户管理 API
  - [ ] Subtask 3.2: 测试用户状态变更
  - [ ] Subtask 3.3: 测试前端组件

---

## Technical Implementation Notes

### Backend Implementation

**User Management API:**
```python
GET /api/v1/users
POST /api/v1/users
PUT /api/v1/users/:id
DELETE /api/v1/users/:id
POST /api/v1/users/:id/reset-password
```

**User Model (already exists):**
```python
class User(Base):
    id, username, email, password_hash
    full_name, phone, role
    is_active, is_superuser
    created_at, updated_at, last_login_at
```

### Frontend Components

**New Components:**
- `UserManagement.vue` - User list with filters
- `UserForm.vue` - Create/Edit user form
- Role selector component

---

## Dependencies

- ✅ Story 3.2: 用户认证系统 (已完成 - User 模型)
- ✅ Story 3.2: JWT 认证 (已完成 - 认证基础)

---

## Definition of Done

- [ ] All 4 ACs implemented and tested
- [ ] User management API working
- [ ] Frontend has complete user management UI
- [ ] Password reset functionality
- [ ] User status management
- [ ] Unit tests pass (>90% coverage)

---

## Dev Agent Record

### Agent Model Used

{{agent_model_name_version}}

### Debug Log References

### Completion Notes List

### File List

### Next Steps

---

## Change Log

- {{date}}: Story created from epics.md
