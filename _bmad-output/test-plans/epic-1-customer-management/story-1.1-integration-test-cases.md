# Story 1.1 客户基础信息维护 - 集成测试用例

**文档版本:** 1.0  
**创建日期:** 2026-02-25  
**最后更新:** 2026-02-25  
**关联测试计划:** `story-1.1-integration-test-plan.md`  

---

## 修订记录

| 版本 | 日期 | 作者 | 变更描述 | 审核状态 |
|------|------|------|----------|----------|
| 1.0 | 2026-02-25 | QA Team | 初始版本创建 | 待审核 |
| | | | | |

---

## 目录

1. [F-1.1 新增客户功能测试用例](#f-11-新增客户功能测试用例)
2. [F-1.2 字段验证功能测试用例](#f-12-字段验证功能测试用例)
3. [F-1.3 客户列表展示测试用例](#f-13-客户列表展示测试用例)
4. [F-1.4 数据一致性测试用例](#f-14-数据一致性测试用例)
5. [I-1.1 API 接口测试用例](#i-11-api-接口测试用例)
6. [I-1.2 API 接口测试用例](#i-12-api-接口测试用例)
7. [UI 集成测试用例](#ui-集成测试用例)

---

## F-1.1 新增客户功能测试用例

### TC-F1.1-01: 成功新增完整信息的客户

**基本信息**
- **优先级:** P0
- **测试类型:** 功能集成测试
- **前置条件:** 
  1. 用户已登录系统
  2. 用户有客户管理权限
  3. 进入客户管理页面

**测试数据**
```javascript
{
  company_name: "测试科技有限公司",
  contact_name: "张三",
  contact_phone: "13800138000",
  credit_code: "91310000MA1K3YJ12X",
  customer_type: "enterprise",
  province: "Shanghai",
  city: "Shanghai",
  address: "浦东新区张江高科技园区 88 号",
  email: "test@example.com",
  website: "https://www.example.com",
  industry: "互联网",
  erp_system: "SAP",
  erp_customer_code: "TEST001",
  remarks: "这是一个测试客户",
  status: "active",
  level: "standard",
  source: "direct"
}
```

**测试步骤**
1. 在客户列表页面，点击"新增客户"按钮
2. 在弹出的表单中，填写上述完整客户信息
3. 确认所有字段填写正确
4. 点击"保存"按钮
5. 等待系统响应
6. 查看页面提示和列表变化

**预期结果**
1. ✅ 系统显示"保存成功"提示（绿色通知）
2. ✅ 表单对话框自动关闭
3. ✅ 客户列表自动刷新
4. ✅ 列表中显示新增的客户
5. ✅ 客户总数 +1
6. ✅ 数据库中存在该客户记录（验证字段：company_name, contact_name, contact_phone）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.1-02: 成功新增仅必填字段的客户

**基本信息**
- **优先级:** P0
- **测试类型:** 功能集成测试
- **前置条件:** 同上

**测试数据**
```javascript
{
  company_name: "最小信息测试公司",
  contact_name: "李四",
  contact_phone: "13900139000"
  // 其他字段不填写
}
```

**测试步骤**
1. 点击"新增客户"按钮
2. 仅填写三个必填字段：公司名称、联系人、联系方式
3. 点击"保存"按钮
4. 查看保存结果

**预期结果**
1. ✅ 系统显示"保存成功"提示
2. ✅ 客户创建成功
3. ✅ 选填字段为空或默认值（status='active', level='standard', source='direct'）
4. ✅ 列表中可以查看到该客户

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.1-03: 新增客户后表单自动关闭

**基本信息**
- **优先级:** P1
- **测试类型:** UI 集成测试
- **前置条件:** 同上

**测试步骤**
1. 点击"新增客户"按钮，打开表单
2. 填写完整客户信息
3. 点击"保存"按钮
4. 观察表单对话框状态

**预期结果**
1. ✅ 保存成功后，表单对话框在 1 秒内自动关闭
2. ✅ 无需手动点击"取消"或关闭按钮
3. ✅ 返回列表页面

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.1-04: 新增客户后列表自动刷新

**基本信息**
- **优先级:** P1
- **测试类型:** 功能集成测试
- **前置条件:** 同上

**测试步骤**
1. 记录当前客户列表的总数（例如：50）
2. 新增一个客户
3. 保存成功后，查看列表总数

**预期结果**
1. ✅ 列表自动刷新（无需手动刷新页面）
2. ✅ 客户总数显示正确（50 → 51）
3. ✅ 新增客户显示在列表中（根据排序规则）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.1-05: 必填字段为空时阻止提交

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 同上

**测试步骤**
1. 点击"新增客户"按钮
2. 不填写任何字段
3. 直接点击"保存"按钮
4. 观察系统反应

**预期结果**
1. ✅ 系统阻止表单提交
2. ✅ 显示验证错误提示
3. ✅ 错误提示包括：公司名称、联系人、联系方式
4. ✅ 表单保持打开状态
5. ✅ 没有 API 请求发送（或前端拦截）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.1-06: 部分必填字段为空时阻止提交

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 同上

**测试步骤**
1. 点击"新增客户"按钮
2. 仅填写"公司名称"字段
3. 不填写"联系人"和"联系方式"
4. 点击"保存"按钮

**预期结果**
1. ✅ 系统阻止表单提交
2. ✅ 显示缺失字段的验证错误
3. ✅ 明确指出"联系人"和"联系方式"为必填项
4. ✅ 光标定位到第一个缺失的必填字段

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.1-07: 新增客户后查看客户详情

**基本信息**
- **优先级:** P1
- **测试类型:** 功能集成测试
- **前置条件:** 已成功新增一个客户

**测试步骤**
1. 在客户列表中找到新增的客户
2. 点击该客户行或"查看"按钮
3. 查看客户详情页面

**预期结果**
1. ✅ 显示完整的客户详情页面
2. ✅ 所有保存的字段都正确显示
3. ✅ 字段值与输入时一致
4. ✅ 数据格式正确（日期、数字等）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.1-08: 连续新增多个客户

**基本信息**
- **优先级:** P1
- **测试类型:** 功能集成测试
- **前置条件:** 同上

**测试步骤**
1. 新增客户 A（公司名称："测试公司 A"）
2. 保存成功后，再次点击"新增客户"
3. 新增客户 B（公司名称："测试公司 B"）
4. 保存成功
5. 查看客户列表

**预期结果**
1. ✅ 客户 A 创建成功
2. ✅ 客户 B 创建成功
3. ✅ 列表中显示两个新客户
4. ✅ 客户总数 +2
5. ✅ 数据库中两条记录都存在

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

## F-1.2 字段验证功能测试用例

### TC-F1.2-01: 手机号格式验证 - 正确格式

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 打开新增客户表单

**测试数据**
- 联系方式："13800138000"
- 其他必填字段正常填写

**测试步骤**
1. 在"联系方式"字段输入 "13800138000"
2. 使该字段失去焦点（点击其他字段）
3. 观察验证结果

**预期结果**
1. ✅ 格式验证通过
2. ✅ 无错误提示
3. ✅ 可以有成功提示（绿色边框或对勾）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.2-02: 手机号格式验证 - 长度错误

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 同上

**测试数据**
- 联系方式："1380013800"（10 位，长度不足）

**测试步骤**
1. 输入"1380013800"
2. 失去焦点
3. 观察验证结果

**预期结果**
1. ✅ 显示格式错误提示："请输入正确的 11 位手机号"
2. ✅ 字段边框变红
3. ✅ 阻止表单提交

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.2-03: 手机号格式验证 - 非数字

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 同上

**测试数据**
- 联系方式："13800138abc"

**测试步骤**
1. 输入"13800138abc"
2. 失去焦点

**预期结果**
1. ✅ 显示错误提示："手机号只能包含数字"
2. ✅ 阻止提交

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.2-04: 邮箱格式验证 - 正确格式

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 同上

**测试数据**
- 邮箱："test@example.com"

**测试步骤**
1. 输入"test@example.com"
2. 失去焦点

**预期结果**
1. ✅ 格式验证通过
2. ✅ 无错误提示

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.2-05: 邮箱格式验证 - 错误格式

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 同上

**测试数据**
- 邮箱："invalid-email"

**测试步骤**
1. 输入"invalid-email"
2. 失去焦点

**预期结果**
1. ✅ 显示错误提示："请输入正确的邮箱格式"
2. ✅ 阻止提交

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.2-06: 统一社会信用代码验证 - 正确格式

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 同上

**测试数据**
- 统一社会信用代码："91310000MA1K3YJ12X"

**测试步骤**
1. 输入"91310000MA1K3YJ12X"
2. 失去焦点

**预期结果**
1. ✅ 格式验证通过
2. ✅ 无错误提示

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.2-07: 统一社会信用代码验证 - 长度错误

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 同上

**测试数据**
- 统一社会信用代码："91310000MA1K3YJ12"（17 位）

**测试步骤**
1. 输入"91310000MA1K3YJ12"
2. 失去焦点

**预期结果**
1. ✅ 显示错误提示："统一社会信用代码应为 18 位"
2. ✅ 阻止提交

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.2-08: 公司名称长度验证 - 最小长度

**基本信息**
- **优先级:** P1
- **测试类型:** 边界值测试
- **前置条件:** 同上

**测试数据**
- 公司名称："最"（1 个字符）

**测试步骤**
1. 输入"最"
2. 失去焦点

**预期结果**
1. ✅ 验证通过（如果允许 1 个字符）
2. ✅ 或提示最小长度要求（如果有）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.2-09: 公司名称长度验证 - 最大长度

**基本信息**
- **优先级:** P1
- **测试类型:** 边界值测试
- **前置条件:** 同上

**测试数据**
- 公司名称：200 个字符的中文字符串

**测试步骤**
1. 输入 200 个字符的公司名称
2. 失去焦点

**预期结果**
1. ✅ 验证通过
2. ✅ 可以正常保存

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.2-10: 公司名称长度验证 - 超长

**基本信息**
- **优先级:** P1
- **测试类型:** 边界值测试
- **前置条件:** 同上

**测试数据**
- 公司名称：201 个字符

**测试步骤**
1. 输入 201 个字符的公司名称
2. 失去焦点

**预期结果**
1. ✅ 显示错误提示："公司名称最多 200 个字符"
2. ✅ 阻止提交

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.2-11: 前端后端验证一致性

**基本信息**
- **优先级:** P0
- **测试类型:** 集成验证测试
- **前置条件:** 同上

**测试数据**
- 联系方式："13800"（无效手机号）

**测试步骤**
1. 在前端表单输入无效手机号
2. 观察前端验证
3. 尝试提交表单
4. 使用工具（如 Postman）直接调用 API 发送相同数据

**预期结果**
1. ✅ 前端显示验证错误
2. ✅ 前端阻止提交（或提交后被后端拒绝）
3. ✅ 直接调用 API 时，后端也返回验证错误
4. ✅ 前后端验证规则一致

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.2-12: 字段格式错误提示友好性

**基本信息**
- **优先级:** P1
- **测试类型:** UI/UX 测试
- **前置条件:** 同上

**测试步骤**
1. 分别输入各种错误的字段格式
2. 观察错误提示的文案

**预期结果**
1. ✅ 提示清晰明确，不使用技术术语
2. ✅ 指出具体哪个字段错误
3. ✅ 说明如何修正（例如："请输入 11 位数字"）
4. ✅ 提示颜色明显（红色）
5. ✅ 提示位置合理（字段下方或旁边）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

## F-1.3 客户列表展示测试用例

### TC-F1.3-01: 列表显示基本字段

**基本信息**
- **优先级:** P1
- **测试类型:** UI 集成测试
- **前置条件:** 系统中已有客户数据

**测试步骤**
1. 进入客户管理页面
2. 查看客户列表

**预期结果**
1. ✅ 列表显示以下字段：公司名称、联系人、联系方式、状态
2. ✅ 数据显示正确，与数据库一致
3. ✅ 表格布局整齐
4. ✅ 中文显示正常，无乱码

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.3-02: 列表分页显示

**基本信息**
- **优先级:** P1
- **测试类型:** 功能集成测试
- **前置条件:** 系统中有 25 条客户数据

**测试步骤**
1. 进入客户管理页面
2. 查看列表和分页组件

**预期结果**
1. ✅ 第一页显示 20 条数据
2. ✅ 分页显示"共 2 页"
3. ✅ 显示"总计 25 条"
4. ✅ 可以点击页码切换到第二页
5. ✅ 第二页显示剩余 5 条数据

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.3-03: 列表状态显示正确

**基本信息**
- **优先级:** P1
- **测试类型:** 功能集成测试
- **前置条件:** 系统中有不同状态的客户

**测试步骤**
1. 准备数据：active、inactive、potential 状态的客户各一个
2. 查看列表中的状态显示

**预期结果**
1. ✅ active 状态显示为"活跃"或"正常"，使用绿色标签
2. ✅ inactive 状态显示为"不活跃"或"停用"，使用灰色/红色标签
3. ✅ potential 状态显示为"潜在"，使用蓝色标签
4. ✅ 状态文本和颜色符合设计

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.3-04: 空列表显示

**基本信息**
- **优先级:** P1
- **测试类型:** UI 测试
- **前置条件:** 系统中无客户数据

**测试步骤**
1. 清空所有客户数据（或进入空数据的测试环境）
2. 访问客户管理页面

**预期结果**
1. ✅ 显示空状态提示（如："暂无客户数据"）
2. ✅ 显示"新增客户"按钮
3. ✅ 可以正常点击新增客户
4. ✅ 表格区域显示友好提示，而非空白

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.3-05: 列表数据加载状态

**基本信息**
- **优先级:** P1
- **测试类型:** UI 测试
- **前置条件:** 同上

**测试步骤**
1. 刷新页面
2. 观察数据加载过程

**预期结果**
1. ✅ 显示 loading 加载动画
2. ✅ 加载过程中表格区域显示占位符或骨架屏
3. ✅ 加载完成后显示数据
4. ✅ 加载时间合理（<2 秒）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.3-06: 列表刷新功能

**基本信息**
- **优先级:** P1
- **测试类型:** 功能集成测试
- **前置条件:** 已有客户数据

**测试步骤**
1. 在另一个浏览器窗口新增一个客户
2. 在原窗口点击刷新按钮（如果有）
3. 或重新进入客户管理页面

**预期结果**
1. ✅ 列表重新加载数据
2. ✅ 显示新增的客户
3. ✅ 数据是最新的

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

## F-1.4 数据一致性测试用例

### TC-F1.4-01: 重复公司名称检测

**基本信息**
- **优先级:** P0
- **测试类型:** 数据一致性测试
- **前置条件:** 系统中已存在公司名称为"测试公司"的客户

**测试数据**
- 公司名称："测试公司"（重复）
- 其他字段正常填写

**测试步骤**
1. 点击"新增客户"
2. 输入已存在的公司名称"测试公司"
3. 填写其他必填字段
4. 尝试提交

**预期结果**
1. ✅ 前端或后端检测到重复
2. ✅ 显示错误提示："公司名称已存在"
3. ✅ 阻止提交
4. ✅ 数据库中没有新增重复记录

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.4-02: 重复信用代码检测

**基本信息**
- **优先级:** P0
- **测试类型:** 数据一致性测试
- **前置条件:** 系统中已存在信用代码为"91310000MA1K3YJ12X"的客户

**测试数据**
- 统一社会信用代码："91310000MA1K3YJ12X"（重复）

**测试步骤**
1. 点击"新增客户"
2. 输入已存在的信用代码
3. 尝试提交

**预期结果**
1. ✅ 检测到重复
2. ✅ 显示错误提示："统一社会信用代码已存在"
3. ✅ 阻止提交

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.4-03: 非重复数据允许提交

**基本信息**
- **优先级:** P0
- **测试类型:** 数据一致性测试
- **前置条件:** 同上

**测试数据**
- 公司名称："独一无二测试公司"
- 信用代码："91310000MA1K3YJ13Y"

**测试步骤**
1. 输入不重复的公司名称
2. 输入不重复的信用代码
3. 提交

**预期结果**
1. ✅ 允许提交
2. ✅ 创建成功
3. ✅ 无重复错误提示

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.4-04: 前后端重复检测一致性

**基本信息**
- **优先级:** P0
- **测试类型:** 集成验证测试
- **前置条件:** 同上

**测试步骤**
1. 尝试绕过前端验证（使用 Postman 直接调用 API）
2. 提交重复的公司名称
3. 观察后端响应

**预期结果**
1. ✅ 后端检测到重复
2. ✅ 返回 409 Conflict 状态码
3. ✅ 返回错误信息："公司名称已存在"
4. ✅ 数据库约束也阻止重复（双重保护）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.4-05: 重复错误提示明确性

**基本信息**
- **优先级:** P1
- **测试类型:** UI/UX 测试
- **前置条件:** 同上

**测试步骤**
1. 提交重复数据
2. 观察错误提示

**预期结果**
1. ✅ 提示明确指出哪个字段重复
2. ✅ 提示语言友好，非技术术语
3. ✅ 提示位置明显
4. ✅ 提供修正建议（如："请修改公司名称后重试"）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.4-06: 数据库唯一约束验证

**基本信息**
- **优先级:** P0
- **测试类型:** 数据库集成测试
- **前置条件:** 直接访问数据库

**测试步骤**
1. 尝试直接在数据库中插入重复数据：
```sql
INSERT INTO customers (company_name, contact_name, contact_phone, credit_code)
VALUES ('测试公司', '王五', '13700137000', '91310000MA1K3YJ14Z');
```

**预期结果**
1. ✅ 如果公司名称重复，数据库抛出唯一约束错误
2. ✅ 如果信用代码重复，数据库抛出唯一约束错误
3. ✅ 插入失败
4. ✅ 数据库无新记录

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

## I-1.1 API 接口测试用例

### TC-I1.1-01: 成功获取客户列表

**基本信息**
- **优先级:** P0
- **测试类型:** API 集成测试
- **前置条件:** 已登录，有有效 token

**请求**
```http
GET /api/v1/customers
Authorization: Bearer <token>
```

**预期响应**
```json
{
  "success": true,
  "data": {
    "items": [
      {
        "id": 1,
        "company_name": "测试公司",
        "contact_name": "张三",
        "contact_phone": "13800138000",
        "status": "active"
      }
    ],
    "total": 1,
    "page": 1,
    "page_size": 20
  }
}
```
- 状态码：200 OK
- Content-Type: application/json

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-I1.1-02: 分页参数测试

**基本信息**
- **优先级:** P1
- **测试类型:** API 集成测试
- **前置条件:** 系统中有 50 条客户数据

**请求**
```http
GET /api/v1/customers?page=1&page_size=20
Authorization: Bearer <token>
```

**预期响应**
```json
{
  "success": true,
  "data": {
    "items": [...],  // 20 条数据
    "total": 50,
    "page": 1,
    "page_size": 20,
    "total_pages": 3
  }
}
```

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-I1.1-03: 认证失败测试

**基本信息**
- **优先级:** P0
- **测试类型:** API 安全测试
- **前置条件:** 无

**请求**
```http
GET /api/v1/customers
// 无 Authorization header
```

**预期响应**
```json
{
  "success": false,
  "error": "Unauthorized"
}
```
- 状态码：401 Unauthorized

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-I1.1-04: 响应数据结构验证

**基本信息**
- **优先级:** P1
- **测试类型:** API 集成测试
- **前置条件:** 同上

**请求**
```http
GET /api/v1/customers
Authorization: Bearer <token>
```

**预期响应**
```json
{
  "success": true,
  "data": {
    "items": [],
    "total": 0,
    "page": 1,
    "page_size": 20
  }
}
```
- 必须包含 `data.items` 数组
- 必须包含 `data.total` 数字
- 必须包含分页信息

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

## I-1.2 API 接口测试用例

### TC-I1.2-01: 成功创建客户

**基本信息**
- **优先级:** P0
- **测试类型:** API 集成测试
- **前置条件:** 已登录

**请求**
```http
POST /api/v1/customers
Authorization: Bearer <token>
Content-Type: application/json

{
  "company_name": "API 测试公司",
  "contact_name": "赵六",
  "contact_phone": "13600136000"
}
```

**预期响应**
```json
{
  "success": true,
  "data": {
    "id": 123,
    "company_name": "API 测试公司",
    "contact_name": "赵六",
    "contact_phone": "13600136000",
    "created_at": "2026-02-25T10:00:00Z"
  }
}
```
- 状态码：201 Created

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-I1.2-02: 必填字段缺失

**基本信息**
- **优先级:** P0
- **测试类型:** API 验证测试
- **前置条件:** 同上

**请求**
```http
POST /api/v1/customers
Authorization: Bearer <token>
Content-Type: application/json

{
  "company_name": "测试公司"
  // 缺少 contact_name 和 contact_phone
}
```

**预期响应**
```json
{
  "success": false,
  "error": "Validation Error",
  "details": [
    {
      "field": "contact_name",
      "message": "Contact name is required"
    },
    {
      "field": "contact_phone",
      "message": "Contact phone is required"
    }
  ]
}
```
- 状态码：400 Bad Request

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-I1.2-03: 手机号格式错误

**基本信息**
- **优先级:** P0
- **测试类型:** API 验证测试
- **前置条件:** 同上

**请求**
```http
POST /api/v1/customers
Authorization: Bearer <token>
Content-Type: application/json

{
  "company_name": "测试公司",
  "contact_name": "张三",
  "contact_phone": "13800"
}
```

**预期响应**
```json
{
  "success": false,
  "error": "Validation Error",
  "details": [
    {
      "field": "contact_phone",
      "message": "Invalid phone number format"
    }
  ]
}
```
- 状态码：400 Bad Request

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-I1.2-04: 邮箱格式错误

**基本信息**
- **优先级:** P0
- **测试类型:** API 验证测试
- **前置条件:** 同上

**请求**
```http
POST /api/v1/customers
Authorization: Bearer <token>
Content-Type: application/json

{
  "company_name": "测试公司",
  "contact_name": "张三",
  "contact_phone": "13800138000",
  "email": "invalid-email"
}
```

**预期响应**
```json
{
  "success": false,
  "error": "Validation Error",
  "details": [
    {
      "field": "email",
      "message": "Invalid email format"
    }
  ]
}
```
- 状态码：400 Bad Request

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-I1.2-05: 公司名称重复

**基本信息**
- **优先级:** P0
- **测试类型:** API 数据一致性测试
- **前置条件:** 系统中已存在"测试公司"

**请求**
```http
POST /api/v1/customers
Authorization: Bearer <token>
Content-Type: application/json

{
  "company_name": "测试公司",
  "contact_name": "李四",
  "contact_phone": "13900139000"
}
```

**预期响应**
```json
{
  "success": false,
  "error": "Conflict",
  "message": "Company name already exists"
}
```
- 状态码：409 Conflict

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-I1.2-06: 信用代码重复

**基本信息**
- **优先级:** P0
- **测试类型:** API 数据一致性测试
- **前置条件:** 系统中已存在该信用代码

**请求**
```http
POST /api/v1/customers
Authorization: Bearer <token>
Content-Type: application/json

{
  "company_name": "新公司",
  "contact_name": "王五",
  "contact_phone": "13700137000",
  "credit_code": "91310000MA1K3YJ12X"
}
```

**预期响应**
```json
{
  "success": false,
  "error": "Conflict",
  "message": "Credit code already exists"
}
```
- 状态码：409 Conflict

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-I1.2-07: 字段长度超长

**基本信息**
- **优先级:** P1
- **测试类型:** API 边界值测试
- **前置条件:** 同上

**请求**
```http
POST /api/v1/customers
Authorization: Bearer <token>
Content-Type: application/json

{
  "company_name": "[201 个字符的公司名称]",
  "contact_name": "张三",
  "contact_phone": "13800138000"
}
```

**预期响应**
```json
{
  "success": false,
  "error": "Validation Error",
  "details": [
    {
      "field": "company_name",
      "message": "Company name cannot exceed 200 characters"
    }
  ]
}
```
- 状态码：400 Bad Request

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-I1.2-08: 认证失败测试

**基本信息**
- **优先级:** P0
- **测试类型:** API 安全测试
- **前置条件:** 无

**请求**
```http
POST /api/v1/customers
// 无 Authorization header
Content-Type: application/json

{
  "company_name": "测试公司",
  "contact_name": "张三",
  "contact_phone": "13800138000"
}
```

**预期响应**
```json
{
  "success": false,
  "error": "Unauthorized"
}
```
- 状态码：401 Unauthorized

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

## UI 集成测试用例

### TC-UI1.1-01: 页面正常加载

**基本信息**
- **优先级:** P1
- **测试类型:** UI 基础测试
- **前置条件:** 已登录系统

**测试步骤**
1. 访问客户管理页面路由（例如：/customers）
2. 打开浏览器开发者工具

**预期结果**
1. ✅ 页面正常显示，无白屏
2. ✅ 控制台无 JavaScript 错误
3. ✅ 所有资源加载成功（无 404）
4. ✅ 页面标题正确

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-UI1.2-01: 表单正常打开

**基本信息**
- **优先级:** P0
- **测试类型:** UI 交互测试
- **前置条件:** 同上

**测试步骤**
1. 在客户列表页面点击"新增客户"按钮
2. 观察表单对话框

**预期结果**
1. ✅ 表单对话框正常弹出
2. ✅ 对话框标题显示"新增客户"
3. ✅ 所有字段可见且可编辑
4. ✅ 保存和取消按钮可见

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-UI1.2-02: 必填字段标识

**基本信息**
- **优先级:** P1
- **测试类型:** UI/UX 测试
- **前置条件:** 同上

**测试步骤**
1. 打开新增客户表单
2. 查看字段标签

**预期结果**
1. ✅ 必填字段（公司名称、联系人、联系方式）有红色星号（*）标识
2. ✅ 选填字段无星号
3. ✅ 标识清晰可见

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-UI1.4-01: 保存成功通知

**基本信息**
- **优先级:** P0
- **测试类型:** UI 通知测试
- **前置条件:** 同上

**测试步骤**
1. 填写完整的客户信息
2. 点击"保存"按钮
3. 观察通知提示

**预期结果**
1. ✅ 显示成功通知（Toast/Message）
2. ✅ 通知颜色为绿色
3. ✅ 通知内容明确（如："保存成功"）
4. ✅ 通知显示位置合理（通常右上角）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-UI1.4-02: 保存失败通知

**基本信息**
- **优先级:** P0
- **测试类型:** UI 通知测试
- **前置条件:** 同上

**测试步骤**
1. 填写错误的客户信息（如重复的公司名称）
2. 点击"保存"按钮
3. 观察通知提示

**预期结果**
1. ✅ 显示错误通知
2. ✅ 通知颜色为红色
3. ✅ 通知内容说明失败原因
4. ✅ 通知显示位置合理

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-UI1.4-03: 网络错误通知

**基本信息**
- **优先级:** P1
- **测试类型:** UI 异常处理测试
- **前置条件:** 同上

**测试步骤**
1. 打开浏览器开发者工具 - Network 标签
2. 点击"Offline"模拟网络断开
3. 填写客户信息并点击"保存"

**预期结果**
1. ✅ 显示"网络错误"或"连接失败"提示
2. ✅ 提示友好，非技术术语
3. ✅ 建议用户检查网络连接

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-UI1.4-04: 通知自动消失

**基本信息**
- **优先级:** P1
- **测试类型:** UI 通知测试
- **前置条件:** 同上

**测试步骤**
1. 执行保存操作
2. 显示通知后开始计时
3. 观察通知是否自动消失

**预期结果**
1. ✅ 通知在 3-5 秒后自动消失
2. ✅ 无需手动关闭
3. ✅ 消失动画流畅

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

**文档结束**
