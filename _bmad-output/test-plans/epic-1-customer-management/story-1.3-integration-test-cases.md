# Story 1.3 客户信息编辑与删除 - 集成测试用例

**文档版本:** 1.0  
**创建日期:** 2026-02-25  
**最后更新:** 2026-02-25  
**关联测试计划:** `story-1.3-integration-test-plan.md`  

---

## 修订记录

| 版本 | 日期 | 作者 | 变更描述 | 审核状态 |
|------|------|------|----------|----------|
| 1.0 | 2026-02-25 | QA Team | 初始版本创建 | 待审核 |
| | | | | |

---

## 目录

1. [F-1.3.1 编辑客户信息功能测试用例](#f-131-编辑客户信息功能测试用例)
2. [F-1.3.2 编辑数据验证测试用例](#f-132-编辑数据验证测试用例)
3. [F-1.3.3 修改日志记录测试用例](#f-133-修改日志记录测试用例)
4. [F-1.3.4 删除客户功能测试用例](#f-134-删除客户功能测试用例)
5. [F-1.3.5 删除保护测试用例](#f-135-删除保护测试用例)
6. [F-1.3.6 级联删除测试用例](#f-136-级联删除测试用例)
7. [API 接口测试用例](#api-接口测试用例)
8. [UI 集成测试用例](#ui-集成测试用例)

---

## F-1.3.1 编辑客户信息功能测试用例

### TC-F1.3.1-01: 编辑单个字段

**基本信息**
- **优先级:** P0
- **测试类型:** 功能集成测试
- **前置条件:** 
  1. 系统中有客户"测试公司"
  2. 用户已登录并有编辑权限

**测试数据**
- 原始数据：contact_phone = "13800138000"
- 修改为：contact_phone = "13900139000"

**测试步骤**
1. 在客户列表中找到"测试公司"
2. 点击"编辑"按钮
3. 仅修改"联系方式"字段
4. 点击"保存"

**预期结果**
1. ✅ 保存成功提示
2. ✅ 仅联系方式被更新
3. ✅ 其他字段保持不变
4. ✅ 列表刷新显示新号码

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  
**备注:** _______________

---

### TC-F1.3.1-02: 编辑多个字段

**基本信息**
- **优先级:** P0
- **测试类型:** 功能集成测试
- **前置条件:** 同上

**测试数据**
- 修改：contact_name, contact_phone, email 三个字段

**测试步骤**
1. 点击"编辑"
2. 修改联系人、联系方式、邮箱
3. 保存

**预期结果**
1. ✅ 三个字段都被更新
2. ✅ 其他字段不变
3. ✅ 保存成功

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.1-03: 编辑必填字段

**基本信息**
- **优先级:** P0
- **测试类型:** 功能集成测试
- **前置条件:** 同上

**测试数据**
- 修改：company_name = "新公司名称"

**测试步骤**
1. 点击"编辑"
2. 修改公司名称
3. 保存

**预期结果**
1. ✅ 公司名称更新
2. ✅ 验证唯一性（不与其他重复）
3. ✅ 保存成功

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.1-04: 编辑后保存

**基本信息**
- **优先级:** P0
- **测试类型:** 功能集成测试
- **前置条件:** 同上

**测试步骤**
1. 修改客户信息
2. 点击"保存"
3. 查看数据库

**预期结果**
1. ✅ 数据库记录更新
2. ✅ updated_at 时间更新
3. ✅ 数据正确

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.1-05: 编辑后取消

**基本信息**
- **优先级:** P1
- **测试类型:** UI 交互测试
- **前置条件:** 同上

**测试步骤**
1. 点击"编辑"
2. 修改部分字段
3. 点击"取消"

**预期结果**
1. ✅ 表单关闭
2. ✅ 修改未保存
3. ✅ 数据保持原值

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.1-06: 编辑后列表刷新

**基本信息**
- **优先级:** P1
- **测试类型:** 功能集成测试
- **前置条件:** 同上

**测试步骤**
1. 编辑客户信息
2. 保存成功
3. 查看客户列表

**预期结果**
1. ✅ 列表自动刷新
2. ✅ 显示更新后的数据
3. ✅ 无需手动刷新

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.1-07: 编辑详情页刷新

**基本信息**
- **优先级:** P1
- **测试类型:** 功能集成测试
- **前置条件:** 同上

**测试步骤**
1. 在详情页点击"编辑"
2. 修改信息并保存
3. 查看详情页

**预期结果**
1. ✅ 详情页显示更新数据
2. ✅ 数据一致

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.1-08: 并发编辑处理

**基本信息**
- **优先级:** P2
- **测试类型:** 并发测试
- **前置条件:** 两个用户同时在线

**测试步骤**
1. 用户 A 打开编辑表单
2. 用户 B 也打开编辑表单
3. 用户 A 先保存
4. 用户 B 后保存

**预期结果**
1. ✅ 后保存的覆盖先保存的（或提示冲突）
2. ✅ 有版本控制或乐观锁机制

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.1-09: 编辑历史记录

**基本信息**
- **优先级:** P1
- **测试类型:** 功能集成测试
- **前置条件:** 已有多次修改

**测试步骤**
1. 多次编辑同一客户
2. 查看修改历史

**预期结果**
1. ✅ 显示所有修改记录
2. ✅ 时间线清晰
3. ✅ 修改内容详细

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.1-10: 编辑权限验证

**基本信息**
- **优先级:** P1
- **测试类型:** 权限测试
- **前置条件:** 无编辑权限的用户

**测试步骤**
1. 使用无权限账号登录
2. 查看客户列表
3. 尝试访问编辑功能

**预期结果**
1. ✅ 不显示编辑按钮
2. ✅ 或直接访问 API 返回 403

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

## F-1.3.2 编辑数据验证测试用例

### TC-F1.3.2-01: 必填字段验证

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 编辑模式

**测试步骤**
1. 清空必填字段（公司名称）
2. 尝试保存

**预期结果**
1. ✅ 显示必填错误提示
2. ✅ 阻止提交
3. ✅ 保存失败

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.2-02: 手机号格式验证

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 同上

**测试步骤**
1. 修改手机号为"13800"
2. 保存

**预期结果**
1. ✅ 显示格式错误
2. ✅ 阻止提交

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.2-03: 邮箱格式验证

**基本信息**
- **优先级:** P0
- **测试类型:** 验证功能测试
- **前置条件:** 同上

**测试步骤**
1. 修改邮箱为"invalid"
2. 保存

**预期结果**
1. ✅ 显示格式错误
2. ✅ 阻止提交

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.2-04: 公司名称唯一性

**基本信息**
- **优先级:** P0
- **测试类型:** 唯一性验证
- **前置条件:** 系统中已有"已存在公司"

**测试步骤**
1. 修改公司名称为"已存在公司"
2. 保存

**预期结果**
1. ✅ 显示重复错误
2. ✅ 阻止提交
3. ✅ 提示名称已存在

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.2-05: 信用代码唯一性

**基本信息**
- **优先级:** P0
- **测试类型:** 唯一性验证
- **前置条件:** 系统中已有该信用代码

**测试步骤**
1. 修改信用代码为已存在的代码
2. 保存

**预期结果**
1. ✅ 显示重复错误
2. ✅ 阻止提交

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.2-06: 字段长度验证

**基本信息**
- **优先级:** P1
- **测试类型:** 边界值测试
- **前置条件:** 同上

**测试步骤**
1. 修改公司名称为 201 个字符
2. 保存

**预期结果**
1. ✅ 显示超长错误
2. ✅ 阻止提交

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.2-07: 前后端验证一致

**基本信息**
- **优先级:** P0
- **测试类型:** 集成验证
- **前置条件:** 同上

**测试步骤**
1. 输入错误格式的手机号
2. 观察前端验证
3. 绕过前端直接调用 API

**预期结果**
1. ✅ 前端显示错误
2. ✅ 后端也返回验证错误
3. ✅ 验证规则一致

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.2-08: 错误提示友好性

**基本信息**
- **优先级:** P1
- **测试类型:** UI/UX 测试
- **前置条件:** 同上

**测试步骤**
1. 触发各种验证错误
2. 观察提示信息

**预期结果**
1. ✅ 提示清晰明确
2. ✅ 指出具体错误字段
3. ✅ 说明如何修正

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

## F-1.3.3 修改日志记录测试用例

### TC-F1.3.3-01: 记录修改字段

**基本信息**
- **优先级:** P1
- **测试类型:** 日志功能测试
- **前置条件:** 已修改客户信息

**测试步骤**
1. 修改联系方式
2. 保存
3. 查询修改日志表

**预期结果**
1. ✅ 日志表中有记录
2. ✅ 字段为"contact_phone"
3. ✅ 记录准确

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.3-02: 记录修改前后值

**基本信息**
- **优先级:** P1
- **测试类型:** 日志功能测试
- **前置条件:** 同上

**测试步骤**
1. 修改联系方式从 A 到 B
2. 查看日志

**预期结果**
1. ✅ old_value = A
2. ✅ new_value = B
3. ✅ 值正确

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.3-03: 记录修改人

**基本信息**
- **优先级:** P1
- **测试类型:** 日志功能测试
- **前置条件:** 同上

**测试步骤**
1. 用户 A 执行修改
2. 查看日志

**预期结果**
1. ✅ changed_by = 用户 A 的 ID
2. ✅ 操作人正确

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.3-04: 记录修改时间

**基本信息**
- **优先级:** P1
- **测试类型:** 日志功能测试
- **前置条件:** 同上

**测试步骤**
1. 执行修改
2. 查看日志时间

**预期结果**
1. ✅ changed_at 为当前时间
2. ✅ 时间准确

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.3-05: 多次修改记录

**基本信息**
- **优先级:** P1
- **测试类型:** 日志功能测试
- **前置条件:** 同上

**测试步骤**
1. 对同一客户修改 3 次
2. 查看日志

**预期结果**
1. ✅ 有 3 条日志记录
2. ✅ 按时间倒序排列
3. ✅ 每次修改都记录

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.3-06: 查看修改历史

**基本信息**
- **优先级:** P1
- **测试类型:** UI 功能测试
- **前置条件:** 同上

**测试步骤**
1. 在客户详情页点击"修改历史"
2. 查看历史记录

**预期结果**
1. ✅ 显示时间线
2. ✅ 显示每次修改内容
3. ✅ UI 友好

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

## F-1.3.4 删除客户功能测试用例

### TC-F1.3.4-01: 删除无关联客户

**基本信息**
- **优先级:** P0
- **测试类型:** 删除功能测试
- **前置条件:** 客户无任何关联数据

**测试步骤**
1. 找到无关联的客户
2. 点击"删除"
3. 确认删除

**预期结果**
1. ✅ 删除成功提示
2. ✅ 客户从列表消失
3. ✅ 数据库中无记录
4. ✅ 总数 -1

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.4-02: 删除确认对话框

**基本信息**
- **优先级:** P0
- **测试类型:** UI 交互测试
- **前置条件:** 同上

**测试步骤**
1. 点击"删除"按钮
2. 观察对话框

**预期结果**
1. ✅ 弹出确认对话框
2. ✅ 显示警告图标
3. ✅ 提示文字清晰
4. ✅ 有确认和取消按钮

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.4-03: 确认删除操作

**基本信息**
- **优先级:** P0
- **测试类型:** 删除功能测试
- **前置条件:** 同上

**测试步骤**
1. 点击"删除"
2. 在对话框中点击"确认"

**预期结果**
1. ✅ 执行删除
2. ✅ 显示成功提示
3. ✅ 对话框关闭

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.4-04: 取消删除操作

**基本信息**
- **优先级:** P1
- **测试类型:** UI 交互测试
- **前置条件:** 同上

**测试步骤**
1. 点击"删除"
2. 在对话框中点击"取消"

**预期结果**
1. ✅ 对话框关闭
2. ✅ 删除未执行
3. ✅ 客户保留

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.4-05: 删除后列表刷新

**基本信息**
- **优先级:** P1
- **测试类型:** 功能集成测试
- **前置条件:** 同上

**测试步骤**
1. 删除客户
2. 查看列表

**预期结果**
1. ✅ 列表自动刷新
2. ✅ 被删除客户消失
3. ✅ 总数更新

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.4-06: 删除成功提示

**基本信息**
- **优先级:** P1
- **测试类型:** UI 通知测试
- **前置条件:** 同上

**测试步骤**
1. 执行删除
2. 观察通知

**预期结果**
1. ✅ 显示"删除成功"提示
2. ✅ 绿色通知
3. ✅ 3 秒后自动消失

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.4-07: 删除后数据库验证

**基本信息**
- **优先级:** P0
- **测试类型:** 数据库验证
- **前置条件:** 同上

**测试步骤**
1. 删除客户
2. 直接查询数据库

**预期结果**
1. ✅ 数据库中无该客户记录
2. ✅ 确认物理删除（或逻辑删除标记）

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.4-08: 批量删除

**基本信息**
- **优先级:** P2
- **测试类型:** 批量操作测试
- **前置条件:** 系统支持批量删除

**测试步骤**
1. 选择多个客户
2. 点击"批量删除"
3. 确认

**预期结果**
1. ✅ 所有选中客户被删除
2. ✅ 显示删除结果

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

## F-1.3.5 删除保护测试用例

### TC-F1.3.5-01: 检查价格配置关联

**基本信息**
- **优先级:** P0
- **测试类型:** 删除保护测试
- **前置条件:** 客户有价格配置关联

**测试步骤**
1. 找到有关联价格配置的客户
2. 点击"删除"
3. 确认删除

**预期结果**
1. ✅ 提示"该客户有关联的价格配置"
2. ✅ 删除失败
3. ✅ 或要求二次确认

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.5-02: 检查结算记录关联

**基本信息**
- **优先级:** P0
- **测试类型:** 删除保护测试
- **前置条件:** 客户有结算记录

**测试步骤**
1. 找到有结算记录的客户
2. 点击"删除"

**预期结果**
1. ✅ 提示"该客户有未完成的结算记录"
2. ✅ 删除失败或警告

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.5-03: 删除保护提示

**基本信息**
- **优先级:** P0
- **测试类型:** UI 提示测试
- **前置条件:** 同上

**测试步骤**
1. 尝试删除有关联数据的客户
2. 观察提示

**预期结果**
1. ✅ 显示警告对话框
2. ✅ 列出关联数据
3. ✅ 提示无法删除原因

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.5-04: 阻止删除

**基本信息**
- **优先级:** P0
- **测试类型:** 删除保护测试
- **前置条件:** 同上

**测试步骤**
1. 尝试删除有关联数据的客户
2. 观察结果

**预期结果**
1. ✅ 删除操作被阻止
2. ✅ 客户未被删除
3. ✅ API 返回错误

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.5-05: 二次确认删除

**基本信息**
- **优先级:** P1
- **测试类型:** 强制删除测试
- **前置条件:** 系统支持强制删除

**测试步骤**
1. 删除有关联数据的客户
2. 看到警告后点击"仍然删除"
3. 确认

**预期结果**
1. ✅ 再次确认提示
2. ✅ 说明后果
3. ✅ 确认后执行级联删除

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.5-06: 关联数据列表

**基本信息**
- **优先级:** P1
- **测试类型:** UI 功能测试
- **前置条件:** 同上

**测试步骤**
1. 尝试删除
2. 查看关联数据列表

**预期结果**
1. ✅ 显示"2 个价格配置"
2. ✅ 显示"1 个结算记录"
3. ✅ 列表清晰

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

## F-1.3.6 级联删除测试用例

### TC-F1.3.6-01: 级联删除价格配置

**基本信息**
- **优先级:** P1
- **测试类型:** 级联删除测试
- **前置条件:** 客户有价格配置

**测试步骤**
1. 执行强制删除
2. 查询价格配置表

**预期结果**
1. ✅ 该客户的价格配置被删除
2. ✅ 数据库中无相关记录

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.6-02: 级联删除结算记录

**基本信息**
- **优先级:** P1
- **测试类型:** 级联删除测试
- **前置条件:** 客户有结算记录

**测试步骤**
1. 执行删除
2. 查询结算记录表

**预期结果**
1. ✅ 该客户的结算记录被删除
2. ✅ 数据库记录清除

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.6-03: 级联删除完整性

**基本信息**
- **优先级:** P1
- **测试类型:** 级联删除测试
- **前置条件:** 客户有多种关联数据

**测试步骤**
1. 客户有价格配置、结算记录
2. 执行删除
3. 查询所有关联表

**预期结果**
1. ✅ 所有关联数据被删除
2. ✅ 无残留数据
3. ✅ 数据一致性保持

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-F1.3.6-04: 级联删除事务

**基本信息**
- **优先级:** P0
- **测试类型:** 事务测试
- **前置条件:** 同上

**测试步骤**
1. 执行删除
2. 在删除过程中模拟失败
3. 观察回滚

**预期结果**
1. ✅ 删除失败时事务回滚
2. ✅ 客户和关联数据都保留
3. ✅ 数据一致性保持

**实际结果:** _______________  
**测试状态:** ☐ 通过 ☐ 失败  

---

## API 接口测试用例

### TC-I1.3.1-01: 成功更新客户

**请求**
```http
PUT /api/v1/customers/1
Authorization: Bearer <token>
Content-Type: application/json

{
  "company_name": "新公司名称",
  "contact_phone": "13900139000"
}
```

**预期响应**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "company_name": "新公司名称",
    "contact_phone": "13900139000",
    "updated_at": "2026-02-25T10:00:00Z"
  }
}
```

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.1-02: 部分字段更新

**请求**
```http
PUT /api/v1/customers/1
Authorization: Bearer <token>
Content-Type: application/json

{
  "contact_phone": "13900139000"
}
```

**预期响应**
- 仅更新联系方式，其他字段不变

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.1-03: 必填字段缺失

**请求**
```http
PUT /api/v1/customers/1
Authorization: Bearer <token>
Content-Type: application/json

{
  "contact_name": ""
}
```

**预期响应**
- 400 Bad Request, 验证错误

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.1-04: 格式验证失败

**请求**
```http
PUT /api/v1/customers/1
Authorization: Bearer <token>
Content-Type: application/json

{
  "contact_phone": "13800"
}
```

**预期响应**
- 400 Bad Request, 格式错误

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.1-05: 唯一性验证失败

**请求**
```http
PUT /api/v1/customers/1
Authorization: Bearer <token>
Content-Type: application/json

{
  "company_name": "已存在公司"
}
```

**预期响应**
- 409 Conflict, 重复错误

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.1-06: 客户不存在

**请求**
```http
PUT /api/v1/customers/999
Authorization: Bearer <token>
Content-Type: application/json

{
  "contact_phone": "13900139000"
}
```

**预期响应**
- 404 Not Found

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.1-07: 认证失败

**请求**
```http
PUT /api/v1/customers/1
Content-Type: application/json

{
  "contact_phone": "13900139000"
}
```

**预期响应**
- 401 Unauthorized

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.1-08: 修改日志生成

**请求**
执行更新后查询日志表

**预期结果**
- customer_change_logs 表中有新记录

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.2-01: 成功删除无关联客户

**请求**
```http
DELETE /api/v1/customers/1
Authorization: Bearer <token>
```

**预期响应**
- 204 No Content

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.2-02: 删除有关联客户

**请求**
```http
DELETE /api/v1/customers/2
Authorization: Bearer <token>
```

**预期响应**
- 409 Conflict, 有关联数据

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.2-03: 客户不存在

**请求**
```http
DELETE /api/v1/customers/999
Authorization: Bearer <token>
```

**预期响应**
- 404 Not Found

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.2-04: 认证失败

**请求**
```http
DELETE /api/v1/customers/1
```

**预期响应**
- 401 Unauthorized

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.2-05: 级联删除验证

**请求**
执行强制删除（如支持）

**预期结果**
- 客户和关联数据都删除

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-I1.3.2-06: 事务回滚测试

**测试步骤**
模拟删除过程中失败

**预期结果**
- 删除失败，数据回滚

**测试状态:** ☐ 通过 ☐ 失败  

---

## UI 集成测试用例

### TC-UI1.3.1-01: 列表行编辑按钮

**测试步骤**
1. 查看客户列表
2. 每行都有编辑按钮

**预期结果**
1. ✅ 编辑按钮可见
2. ✅ 可点击

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.1-02: 详情页编辑按钮

**测试步骤**
1. 进入客户详情
2. 查看编辑按钮

**预期结果**
1. ✅ 编辑按钮显示在详情页

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.1-03: 编辑按钮权限

**测试步骤**
1. 使用无权限账号登录
2. 查看编辑按钮

**预期结果**
1. ✅ 不显示编辑按钮

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.1-04: 按钮可用状态

**测试步骤**
1. 查看编辑按钮

**预期结果**
1. ✅ 按钮可点击
2. ✅ 无禁用状态

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.2-01: 表单加载数据

**测试步骤**
1. 点击编辑
2. 查看表单

**预期结果**
1. ✅ 显示当前客户数据
2. ✅ 字段值正确

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.2-02: 表单字段完整性

**测试步骤**
1. 查看编辑表单

**预期结果**
1. ✅ 所有 18 个字段都显示
2. ✅ 布局正确

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.2-03: 必填字段标识

**测试步骤**
1. 查看表单字段

**预期结果**
1. ✅ 必填字段有红色星号

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.2-04: 表单验证提示

**测试步骤**
1. 输入错误数据
2. 查看提示

**预期结果**
1. ✅ 显示错误提示
2. ✅ 提示清晰

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.2-05: 保存按钮功能

**测试步骤**
1. 点击保存

**预期结果**
1. ✅ 提交表单
2. ✅ 保存成功

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.2-06: 取消按钮功能

**测试步骤**
1. 点击取消

**预期结果**
1. ✅ 关闭表单
2. ✅ 不保存修改

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.2-07: 表单自动关闭

**测试步骤**
1. 保存成功

**预期结果**
1. ✅ 表单自动关闭

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.2-08: 表单布局响应式

**测试步骤**
1. 调整窗口大小

**预期结果**
1. ✅ 布局自适应

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.3-01: 对话框显示

**测试步骤**
1. 点击删除

**预期结果**
1. ✅ 弹出确认对话框

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.3-02: 确认按钮

**测试步骤**
1. 查看对话框

**预期结果**
1. ✅ 有"确认"按钮
2. ✅ 红色或警示色

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.3-03: 取消按钮

**测试步骤**
1. 查看对话框

**预期结果**
1. ✅ 有"取消"按钮

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.3-04: 警告图标显示

**测试步骤**
1. 查看对话框

**预期结果**
1. ✅ 显示警告图标
2. ✅ 黄色或红色

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.3-05: 提示文字清晰

**测试步骤**
1. 阅读提示文字

**预期结果**
1. ✅ 说明删除后果
2. ✅ 提示"删除后不可恢复"

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.3-06: 对话框关闭

**测试步骤**
1. 点击 X 或取消

**预期结果**
1. ✅ 对话框关闭

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.4-01: 关联数据警告

**测试步骤**
1. 删除有关联数据的客户

**预期结果**
1. ✅ 显示警告信息
2. ✅ 说明关联数据

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.4-02: 关联数据列表

**测试步骤**
1. 查看详情

**预期结果**
1. ✅ 列出关联数据

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.4-03: 阻止删除提示

**测试步骤**
1. 尝试删除

**预期结果**
1. ✅ 提示无法删除
2. ✅ 说明原因

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.4-04: 建议操作提示

**测试步骤**
1. 查看提示

**预期结果**
1. ✅ 建议先删除关联数据

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.5-01: 修改历史入口

**测试步骤**
1. 查看客户详情

**预期结果**
1. ✅ 有"修改历史"按钮

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.5-02: 历史记录列表

**测试步骤**
1. 点击修改历史

**预期结果**
1. ✅ 显示时间线列表

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.5-03: 修改详情展开

**测试步骤**
1. 点击某条记录

**预期结果**
1. ✅ 展开显示修改内容

**测试状态:** ☐ 通过 ☐ 失败  

---

### TC-UI1.3.5-04: 修改人显示

**测试步骤**
1. 查看修改详情

**预期结果**
1. ✅ 显示修改人
2. ✅ 显示修改时间

**测试状态:** ☐ 通过 ☐ 失败  

---

**文档结束**
